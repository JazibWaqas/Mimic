================================================================================
TESTING REF4.MP4 WITH VIBES + DYNAMIC BPM
================================================================================

ğŸ“¹ Reference: ref4.mp4
   Duration: 14.23s

ğŸ“ Testing with 20 clips
   Cache Version: 6.1 (will re-analyze clips for vibes)

ğŸš€ Starting pipeline...
   Step 1: Validating inputs
   Step 2: Scene detection + BPM detection + Reference analysis
   Step 3: Clip analysis (NEW: extracting vibes + content)
   Step 4: Semantic matching (NEW: vibe-aware selection)
   Step 5: Rendering with dynamic BPM sync


[1/5] Validating inputs...

[2/5] Detecting visual cuts and analyzing reference structure...
  [DIAGNOSTIC] Detecting visual scene changes (threshold=0.3)...
  [OK] Detected 29 visual cuts.
  [BEAT] Detecting BPM for ref_analysis_audio.wav...
  [OK] Detected BPM: 129.20

============================================================
[BRAIN] ANALYZING REFERENCE VIDEO: ref4.mp4
[BRAIN] Using 29 visual scene anchors.
============================================================

[API KEY MANAGER] Loaded 28 API key(s)
[API KEY MANAGER] Current key: AIzaSyD-i-...fqpqg
[OK] Using model: gemini-3-flash-preview
Uploading muted_5782cea3a492.mp4...
Waiting for video processing (state: PROCESSING)...
Upload complete: https://generativelanguage.googleapis.com/v1beta/files/zrkbtymn4arr
[RETRY DEBUG] Reference analysis attempt 1 failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 20, model: gemini-3-flash
Please retry in 47.633246435s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 20
}
, retry_delay {
  seconds: 47
}
]
[QUOTA] Rate limit detected during reference analysis
[API KEY MANAGER] Marking key as exhausted: AIzaSyD-i-...fqpqg (Rate limit during reference analysis)
[API KEY MANAGER] Rotated to key 2/28: AIzaSyAjP3...SS5Pk
[QUOTA] Rotated to new API key, re-initializing genai...
[OK] Using model: gemini-3-flash-preview
Uploading muted_5782cea3a492.mp4...
Waiting for video processing (state: PROCESSING)...
Upload complete: https://generativelanguage.googleapis.com/v1beta/files/34kz574lqovw
[RETRY DEBUG] Reference analysis attempt 2 failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 20, model: gemini-3-flash
Please retry in 18.541924736s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 20
}
, retry_delay {
  seconds: 18
}
]
[QUOTA] Rate limit detected during reference analysis
[API KEY MANAGER] Marking key as exhausted: AIzaSyAjP3...SS5Pk (Rate limit during reference analysis)
[API KEY MANAGER] Rotated to key 3/28: AIzaSyCyiV...ASpNo
[QUOTA] Rotated to new API key, re-initializing genai...
[OK] Using model: gemini-3-flash-preview
Uploading muted_5782cea3a492.mp4...
Waiting for video processing (state: PROCESSING)...
Upload complete: https://generativelanguage.googleapis.com/v1beta/files/8q28v86694pt
[RETRY DEBUG] Reference analysis attempt 3 failed: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 20, model: gemini-3-flash
Please retry in 50.695487009s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-3-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 20
}
, retry_delay {
  seconds: 50
}
]
[QUOTA] Rate limit detected during reference analysis
[API KEY MANAGER] Marking key as exhausted: AIzaSyCyiV...ASpNo (Rate limit during reference analysis)
[API KEY MANAGER] Rotated to key 4/28: AIzaSyCuGa...Nb5WU
[QUOTA] Rotated to new API key, re-initializing genai...
[OK] Using model: gemini-3-flash-preview
Uploading muted_5782cea3a492.mp4...
Waiting for video processing (state: PROCESSING)...
Upload complete: https://generativelanguage.googleapis.com/v1beta/files/4x5jr7oo85zi
[OK] Preserved original cut rhythm: 30 segments (no subdivision)
[OK] Analysis complete: 30 segments.
[OK] Gemini successfully analyzed reference: 30 segments found.

[3/5] Analyzing user clips with Gemini AI...

============================================================
[BRAIN] ANALYZING USER CLIPS (20 total)
[BRAIN] Mode: COMPREHENSIVE (energy + best moments)
============================================================


[1/20] Processing clip.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip.mp4...
    [CACHE] Loaded: Medium/Dynamic with 3 best moments
    [CACHE] Vibes: Friends, Funny, Indoor

[2/20] Processing clip1.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip1.mp4...
    [CACHE] Loaded: Medium/Dynamic with 3 best moments
    [CACHE] Vibes: Nature, Friends, Fun, Outdoors

[3/20] Processing clip10.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip10.mp4...
    [CACHE] Loaded: Medium/Dynamic with 3 best moments
    [CACHE] Vibes: Nature, Friends, Dance, Travel

[4/20] Processing clip11.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip11.mp4...
    [CACHE] Loaded: High/Dynamic with 3 best moments
    [CACHE] Vibes: Action, Travel, Thrill

[5/20] Processing clip12.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip12.mp4...
    [CACHE] Loaded: Medium/Dynamic with 3 best moments
    [CACHE] Vibes: Outdoor, Action, Fun

[6/20] Processing clip13.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip13.mp4...
    [CACHE] Loaded: Medium/Dynamic with 3 best moments
    [CACHE] Vibes: Nature, Travel, Winter, Friends

[7/20] Processing clip14.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip14.mp4...
    [CACHE] Loaded: Medium/Dynamic with 3 best moments
    [CACHE] Vibes: Travel, Friends, Nature

[8/20] Processing clip15.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip15.mp4...
    [CACHE] Loaded: High/Dynamic with 3 best moments
    [CACHE] Vibes: Friends, Funny, Travel, Lifestyle

[9/20] Processing clip16.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip16.mp4...
    [CACHE] Loaded: High/Dynamic with 3 best moments
    [CACHE] Vibes: Friends, Nightlife, Music

[10/20] Processing clip17.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip17.mp4...
    [CACHE] Loaded: High/Dynamic with 3 best moments
    [CACHE] Vibes: Friends, Nightlife, Party

[11/20] Processing clip18.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip18.mp4...
    [CACHE] Loaded: High/Dynamic with 3 best moments
    [CACHE] Vibes: Urban, Night, Friends, Action

[12/20] Processing clip19.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip19.mp4...
    [CACHE] Loaded: High/Dynamic with 3 best moments
    [CACHE] Vibes: Night, Friends, Action, Urban

[13/20] Processing clip2.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip2.mp4...
    [CACHE] Loaded: Medium/Dynamic with 3 best moments
    [CACHE] Vibes: Friends, Action, Fun

[14/20] Processing clip3.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip3.mp4...
    [CACHE] Loaded: Medium/Dynamic with 3 best moments
    [CACHE] Vibes: Friends, Casual, Indoor

[15/20] Processing clip4.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip4.mp4...
    [CACHE] Loaded: Medium/Dynamic with 3 best moments
    [CACHE] Vibes: Friends, Chill, Social

[16/20] Processing clip5.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip5.mp4...
    [CACHE] Loaded: High/Dynamic with 3 best moments
    [CACHE] Vibes: Friends, Music, Fun

[17/20] Processing clip6.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip6.mp4...
    [CACHE] Loaded: High/Dynamic with 3 best moments
    [CACHE] Vibes: Celebration, Friends, Party, Wedding

[18/20] Processing clip7.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip7.mp4...
    [CACHE] Loaded: Medium/Dynamic with 3 best moments
    [CACHE] Vibes: Friends, Urban, Casual

[19/20] Processing clip8.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip8.mp4...
    [CACHE] Loaded: Low/Dynamic with 3 best moments
    [CACHE] Vibes: Nature, Travel, Calm

[20/20] Processing clip9.mp4
[OK] Using model: gemini-3-flash-preview
  Analyzing comprehensively: clip9.mp4...
    [CACHE] Loaded: Medium/Dynamic with 3 best moments
    [CACHE] Vibes: Action, Water Sports, Outdoors

[OK] All 20 clips analyzed
[OK] Rate limiter status: 0 requests in last minute

[OK] Gemini successfully analyzed 20 clips (using originals for cache).
  Standardizing clip 1/20...
  [OK] Standardized: clip_001.mp4
  Standardizing clip 2/20...
  [OK] Standardized: clip_002.mp4
  Standardizing clip 3/20...
  [OK] Standardized: clip_003.mp4
  Standardizing clip 4/20...
  [OK] Standardized: clip_004.mp4
  Standardizing clip 5/20...
  [OK] Standardized: clip_005.mp4
  Standardizing clip 6/20...
  [OK] Standardized: clip_006.mp4
  Standardizing clip 7/20...
  [OK] Standardized: clip_007.mp4
  Standardizing clip 8/20...
  [OK] Standardized: clip_008.mp4
  Standardizing clip 9/20...
  [OK] Standardized: clip_009.mp4
  Standardizing clip 10/20...
  [OK] Standardized: clip_010.mp4
  Standardizing clip 11/20...
  [OK] Standardized: clip_011.mp4
  Standardizing clip 12/20...
  [OK] Standardized: clip_012.mp4
  Standardizing clip 13/20...
  [OK] Standardized: clip_013.mp4
  Standardizing clip 14/20...
  [OK] Standardized: clip_014.mp4
  Standardizing clip 15/20...
  [OK] Standardized: clip_015.mp4
  Standardizing clip 16/20...
  [OK] Standardized: clip_016.mp4
  Standardizing clip 17/20...
  [OK] Standardized: clip_017.mp4
  Standardizing clip 18/20...
  [OK] Standardized: clip_018.mp4
  Standardizing clip 19/20...
  [OK] Standardized: clip_019.mp4
  Standardizing clip 20/20...
  [OK] Standardized: clip_020.mp4
[OK] All clips standardized and ready for render.

[4/5] Creating edit sequence...

============================================================
[EDITOR] MATCHING CLIPS TO BLUEPRINT (FIXED VERSION)
============================================================
  Segments: 30
  Clips: 20
  Clips with pre-computed best moments: 20/20
  ğŸµ Beat grid generated: 31 beats at 129.20 BPM
  DEBUG: First 5 beats: [0.0, 0.46511627906976744, 0.9302325581395349, 1.3953488372093024, 1.8604651162790697]


Segment 1: 0.00s-0.53s (0.53s, Medium/Dynamic)
  ğŸ§  AI Thinking: ğŸ¯ Good Fit: Vibe 'Nature'
  ğŸ“ Selected: clip10.mp4 (Score: 12.0)
    âœ‚ï¸ Cut 1: clip10.mp4 [2.50s-3.03s] (0.53s) â†’ timeline [0.000000s-0.530000s]
    [SKIP] Invalid clip state: clip_end=0.50, clip_start=0.50, duration=2.32

Segment 2: 0.53s-0.93s (0.40s, Medium/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Vibe 'Travel' | Smooth motion flow
  ğŸ“ Selected: clip14.mp4 (Score: 20.0)
    âœ‚ï¸ Cut 1: clip14.mp4 [0.50s-0.90s] (0.40s) â†’ timeline [0.530000s-0.930000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=7.92

Segment 3: 0.93s-1.40s (0.47s, High/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Vibe 'Friends' | Smooth motion flow
  ğŸ“ Selected: clip6.mp4 (Score: 20.0)
    âœ‚ï¸ Cut 1: clip6.mp4 [0.00s-0.47s] (0.47s) â†’ timeline [0.930000s-1.400000s]
    [SKIP] Invalid clip state: clip_end=1.00, clip_start=1.00, duration=5.50

Segment 4: 1.40s-1.87s (0.47s, Medium/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Build-up energy | Smooth motion flow
  ğŸ“ Selected: clip7.mp4 (Score: 23.0)
    âœ‚ï¸ Cut 1: clip7.mp4 [1.00s-1.47s] (0.47s) â†’ timeline [1.400000s-1.870000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=7.92

Segment 5: 1.87s-2.27s (0.40s, Medium/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Build-up energy | Smooth motion flow
  ğŸ“ Selected: clip9.mp4 (Score: 23.0)
    âœ‚ï¸ Cut 1: clip9.mp4 [2.50s-2.90s] (0.40s) â†’ timeline [1.870000s-2.270000s]
    [SKIP] Invalid clip state: clip_end=1.00, clip_start=1.00, duration=15.44

Segment 6: 2.27s-2.77s (0.50s, Medium/Static)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Vibe 'Travel' | Smooth motion flow
  ğŸ“ Selected: clip13.mp4 (Score: 20.0)
    âœ‚ï¸ Cut 1: clip13.mp4 [0.00s-0.50s] (0.50s) â†’ timeline [2.270000s-2.770000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=4.84

Segment 7: 2.77s-3.27s (0.50s, Medium/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Vibe 'Nature' | Smooth motion flow
  ğŸ“ Selected: clip1.mp4 (Score: 20.0)
    âœ‚ï¸ Cut 1: clip1.mp4 [1.00s-1.50s] (0.50s) â†’ timeline [2.770000s-3.270000s]
    [SKIP] Invalid clip state: clip_end=1.00, clip_start=1.00, duration=7.87

Segment 8: 3.27s-3.67s (0.40s, Medium/Dynamic)
  ğŸ§  AI Thinking: ğŸ¯ Good Fit: Smooth motion flow
  ğŸ“ Selected: clip12.mp4 (Score: 8.0)
    âœ‚ï¸ Cut 1: clip12.mp4 [1.00s-1.40s] (0.40s) â†’ timeline [3.270000s-3.670000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=8.80

Segment 9: 3.67s-4.07s (0.40s, Medium/Dynamic)
  ğŸ§  AI Thinking: ğŸ¯ Good Fit: Smooth motion flow
  ğŸ“ Selected: clip4.mp4 (Score: 8.0)
    âœ‚ï¸ Cut 1: clip4.mp4 [0.00s-0.40s] (0.40s) â†’ timeline [3.670000s-4.070000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=8.80

Segment 10: 4.07s-4.57s (0.50s, High/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Vibe 'Friends' | Smooth motion flow
  ğŸ“ Selected: clip18.mp4 (Score: 35.0)
    âœ‚ï¸ Cut 1: clip18.mp4 [4.50s-4.87s] (0.37s) â†’ timeline [4.070000s-4.444110s]
    âœ‚ï¸ Cut 2: clip19.mp4 [10.50s-10.63s] (0.13s) â†’ timeline [4.444110s-4.570000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=26.97

Segment 11: 4.57s-4.97s (0.40s, Medium/Static)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Smooth motion flow
  ğŸ“ Selected: clip2.mp4 (Score: 23.0)
    âœ‚ï¸ Cut 1: clip2.mp4 [0.00s-0.20s] (0.20s) â†’ timeline [4.570000s-4.766098s]
    âœ‚ï¸ Cut 2: clip14.mp4 [0.90s-1.10s] (0.20s) â†’ timeline [4.766098s-4.970000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=10.38

Segment 12: 4.97s-5.40s (0.43s, Medium/Dynamic)
  ğŸ§  AI Thinking: ğŸ¯ Good Fit: Smooth motion flow
  ğŸ“ Selected: clip.mp4 (Score: 8.0)
    âœ‚ï¸ Cut 1: clip.mp4 [0.00s-0.43s] (0.43s) â†’ timeline [4.970000s-5.400000s]
    [SKIP] Invalid clip state: clip_end=2.50, clip_start=2.50, duration=7.67

Segment 13: 5.40s-5.77s (0.37s, High/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Smooth motion flow
  ğŸ“ Selected: clip11.mp4 (Score: 23.0)
    âœ‚ï¸ Cut 1: clip11.mp4 [0.00s-0.37s] (0.37s) â†’ timeline [5.400000s-5.770000s]
    [SKIP] Invalid clip state: clip_end=11.00, clip_start=11.00, duration=19.43

Segment 14: 5.77s-6.10s (0.33s, High/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Vibe 'Friends' | Smooth motion flow
  ğŸ“ Selected: clip15.mp4 (Score: 20.0)
    âœ‚ï¸ Cut 1: clip15.mp4 [0.00s-0.33s] (0.33s) â†’ timeline [5.770000s-6.100000s]
    [SKIP] Invalid clip state: clip_end=26.00, clip_start=26.00, duration=38.33

Segment 15: 6.10s-6.63s (0.53s, Medium/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Vibe 'Action' | Smooth motion flow
  ğŸ“ Selected: clip9.mp4 (Score: 20.3)
    âœ‚ï¸ Cut 1: clip9.mp4 [2.90s-3.14s] (0.24s) â†’ timeline [6.100000s-6.344293s]
    âœ‚ï¸ Cut 2: clip10.mp4 [3.03s-3.32s] (0.29s) â†’ timeline [6.344293s-6.630000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=10.38

Segment 16: 6.63s-7.13s (0.50s, Medium/Dynamic)
  ğŸ§  AI Thinking: ğŸ¯ Good Fit: Smooth motion flow
  ğŸ“ Selected: clip3.mp4 (Score: 8.0)
    âœ‚ï¸ Cut 1: clip3.mp4 [0.00s-0.35s] (0.35s) â†’ timeline [6.630000s-6.976744s]
    âœ‚ï¸ Cut 2: clip7.mp4 [1.47s-1.62s] (0.15s) â†’ timeline [6.976744s-7.130000s]
    [SKIP] Invalid clip state: clip_end=0.50, clip_start=0.50, duration=2.32

Segment 17: 7.13s-7.53s (0.40s, High/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Vibe 'Friends' | Smooth motion flow
  ğŸ“ Selected: clip5.mp4 (Score: 20.0)
    âœ‚ï¸ Cut 1: clip5.mp4 [11.00s-11.19s] (0.19s) â†’ timeline [7.130000s-7.321305s]
    âœ‚ï¸ Cut 2: clip6.mp4 [0.47s-0.68s] (0.21s) â†’ timeline [7.321305s-7.530000s]
    [SKIP] Invalid clip state: clip_end=1.00, clip_start=1.00, duration=5.50

Segment 18: 7.53s-7.93s (0.40s, Medium/Dynamic)
  ğŸ§  AI Thinking: ğŸ¯ Good Fit: Vibe 'Travel' | Smooth motion flow
  ğŸ“ Selected: clip13.mp4 (Score: 14.6)
    âœ‚ï¸ Cut 1: clip13.mp4 [0.50s-0.72s] (0.22s) â†’ timeline [7.530000s-7.748383s]
    âœ‚ï¸ Cut 2: clip12.mp4 [1.40s-1.58s] (0.18s) â†’ timeline [7.748383s-7.930000s]
    [SKIP] Invalid clip state: clip_end=0.50, clip_start=0.50, duration=2.32

Segment 19: 7.93s-8.47s (0.54s, Medium/Dynamic)
  ğŸ§  AI Thinking: ğŸ¯ Good Fit: Peak-intensity moment | Vibe 'Nature' | Smooth motion flow
  ğŸ“ Selected: clip14.mp4 (Score: 13.6)
    âœ‚ï¸ Cut 1: clip14.mp4 [1.10s-1.44s] (0.33s) â†’ timeline [7.930000s-8.261380s]
    âœ‚ï¸ Cut 2: clip1.mp4 [1.50s-1.71s] (0.21s) â†’ timeline [8.261380s-8.470000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=8.80

Segment 20: 8.47s-8.90s (0.43s, Medium/Static)
  ğŸ§  AI Thinking: ğŸ¯ Good Fit: Smooth motion flow
  ğŸ“ Selected: clip2.mp4 (Score: 7.0)
    âœ‚ï¸ Cut 1: clip2.mp4 [0.20s-0.39s] (0.20s) â†’ timeline [8.470000s-8.668787s]
    âœ‚ï¸ Cut 2: clip4.mp4 [0.40s-0.63s] (0.23s) â†’ timeline [8.668787s-8.900000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=4.84

Segment 21: 8.90s-9.83s (0.93s, Medium/Dynamic)
  ğŸ§  AI Thinking: âš™ï¸ Constraint Relaxation: Smooth motion flow
  ğŸ“ Selected: clip9.mp4 (Score: -7.4)
    âœ‚ï¸ Cut 1: clip9.mp4 [3.14s-3.55s] (0.40s) â†’ timeline [8.900000s-9.302326s]
    âœ‚ï¸ Cut 2: clip14.mp4 [1.44s-1.81s] (0.37s) â†’ timeline [9.302326s-9.675507s]
    âœ‚ï¸ Cut 3: clip.mp4 [0.43s-0.58s] (0.15s) â†’ timeline [9.675507s-9.830000s]
    [SKIP] Invalid clip state: clip_end=2.50, clip_start=2.50, duration=7.67

Segment 22: 9.83s-10.27s (0.44s, Medium/Dynamic)
  ğŸ§  AI Thinking: âš™ï¸ Constraint Relaxation: Vibe 'Travel' | Smooth motion flow
  ğŸ“ Selected: clip10.mp4 (Score: -4.0)
    âœ‚ï¸ Cut 1: clip10.mp4 [3.32s-3.76s] (0.44s) â†’ timeline [9.830000s-10.270000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=7.92

Segment 23: 10.27s-10.73s (0.46s, Medium/Dynamic)
  ğŸ§  AI Thinking: âš™ï¸ Constraint Relaxation: âš ï¸ Recently used (2.3s ago) | Smooth motion flow
  ğŸ“ Selected: clip12.mp4 (Score: -9.6)
    âœ‚ï¸ Cut 1: clip12.mp4 [1.58s-2.04s] (0.46s) â†’ timeline [10.270000s-10.730000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=7.92

Segment 24: 10.73s-11.37s (0.64s, High/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Vibe 'Friends' | Smooth motion flow
  ğŸ“ Selected: clip18.mp4 (Score: 32.0)
    âœ‚ï¸ Cut 1: clip18.mp4 [4.87s-5.13s] (0.26s) â†’ timeline [10.730000s-10.989839s]
    âœ‚ï¸ Cut 2: clip19.mp4 [10.63s-11.01s] (0.38s) â†’ timeline [10.989839s-11.370000s]
    [SKIP] Invalid clip state: clip_end=26.00, clip_start=26.00, duration=38.33

Segment 25: 11.37s-11.83s (0.46s, Medium/Static)
  ğŸ§  AI Thinking: ğŸ¯ Good Fit: Vibe 'Nature' | Smooth motion flow
  ğŸ“ Selected: clip13.mp4 (Score: 0.2)
    âœ‚ï¸ Cut 1: clip13.mp4 [0.72s-1.18s] (0.46s) â†’ timeline [11.370000s-11.830000s]
    [SKIP] Invalid clip state: clip_end=1.00, clip_start=1.00, duration=4.07

Segment 26: 11.83s-12.27s (0.44s, Medium/Dynamic)
  ğŸ§  AI Thinking: âš™ï¸ Constraint Relaxation: Smooth motion flow
  ğŸ“ Selected: clip7.mp4 (Score: -1.0)
    âœ‚ï¸ Cut 1: clip7.mp4 [1.62s-1.89s] (0.26s) â†’ timeline [11.830000s-12.093023s]
    âœ‚ï¸ Cut 2: clip3.mp4 [0.35s-0.52s] (0.18s) â†’ timeline [12.093023s-12.270000s]
    [SKIP] Invalid clip state: clip_end=0.50, clip_start=0.50, duration=2.32

Segment 27: 12.27s-12.73s (0.46s, High/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Vibe 'Friends' | Smooth motion flow
  ğŸ“ Selected: clip15.mp4 (Score: 17.0)
    âœ‚ï¸ Cut 1: clip15.mp4 [0.33s-0.62s] (0.29s) â†’ timeline [12.270000s-12.558140s]
    âœ‚ï¸ Cut 2: clip17.mp4 [1.00s-1.17s] (0.17s) â†’ timeline [12.558140s-12.730000s]
    [SKIP] Invalid clip state: clip_end=26.00, clip_start=26.00, duration=38.33

Segment 28: 12.73s-13.20s (0.47s, High/Dynamic)
  ğŸ§  AI Thinking: âœ¨ Smart Match: Smooth motion flow
  ğŸ“ Selected: clip11.mp4 (Score: 20.0)
    âœ‚ï¸ Cut 1: clip11.mp4 [0.37s-0.66s] (0.29s) â†’ timeline [12.730000s-13.023256s]
    âœ‚ï¸ Cut 2: clip16.mp4 [26.00s-26.18s] (0.18s) â†’ timeline [13.023256s-13.200000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=6.90

Segment 29: 13.20s-13.67s (0.47s, Medium/Dynamic)
  ğŸ§  AI Thinking: ğŸ¯ Good Fit: Outro-style shot | Smooth motion flow
  ğŸ“ Selected: clip.mp4 (Score: 5.7)
    âœ‚ï¸ Cut 1: clip.mp4 [0.58s-1.05s] (0.47s) â†’ timeline [13.200000s-13.670000s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=8.80

Segment 30: 13.67s-14.23s (0.56s, Medium/Dynamic)
  ğŸ§  AI Thinking: âš™ï¸ Constraint Relaxation: Vibe 'Travel' | Smooth motion flow | Used 4x
  ğŸ“ Selected: clip14.mp4 (Score: -2.1)
    âœ‚ï¸ Cut 1: clip14.mp4 [1.81s-2.32s] (0.51s) â†’ timeline [13.670000s-14.230975s]
    [SKIP] Invalid clip state: clip_end=0.00, clip_start=0.00, duration=14.47

============================================================
[OK] Matching complete: 44 edit decisions
[OK] Total timeline duration: 14.23s (target: 14.23s)
============================================================


============================================================
[EDL] EDIT DECISION LIST SUMMARY
============================================================

Total decisions: 44
Total segments: 30
Available clips: 20

Clip usage distribution:
  clip_007.mp4: 5 times
  clip_003.mp4: 3 times
  clip_018.mp4: 3 times
  clip_020.mp4: 3 times
  clip_006.mp4: 3 times
  clip_005.mp4: 3 times
  clip_001.mp4: 3 times
  clip_017.mp4: 2 times
  clip_002.mp4: 2 times
  clip_015.mp4: 2 times
  clip_011.mp4: 2 times
  clip_012.mp4: 2 times
  clip_013.mp4: 2 times
  clip_004.mp4: 2 times
  clip_008.mp4: 2 times
  clip_014.mp4: 2 times
  clip_016.mp4: 1 times
  clip_010.mp4: 1 times
  clip_009.mp4: 1 times


[5/5] Rendering final video...
    [OK] Segment extracted: 2.50s - 3.03s
    [OK] Segment extracted: 0.50s - 0.90s
    [OK] Segment extracted: 0.00s - 0.47s
    [OK] Segment extracted: 1.00s - 1.47s
    [OK] Segment extracted: 2.50s - 2.90s
    [OK] Segment extracted: 0.00s - 0.50s
    [OK] Segment extracted: 1.00s - 1.50s
    [OK] Segment extracted: 1.00s - 1.40s
    [OK] Segment extracted: 0.00s - 0.40s
    [OK] Segment extracted: 4.50s - 4.87s
    [OK] Segment extracted: 10.50s - 10.63s
    [OK] Segment extracted: 0.00s - 0.20s
    [OK] Segment extracted: 0.90s - 1.10s
    [OK] Segment extracted: 0.00s - 0.43s
    [OK] Segment extracted: 0.00s - 0.37s
    [OK] Segment extracted: 0.00s - 0.33s
    [OK] Segment extracted: 2.90s - 3.14s
    [OK] Segment extracted: 3.03s - 3.32s
    [OK] Segment extracted: 0.00s - 0.35s
    [OK] Segment extracted: 1.47s - 1.62s
    [OK] Segment extracted: 11.00s - 11.19s
    [OK] Segment extracted: 0.47s - 0.68s
    [OK] Segment extracted: 0.50s - 0.72s
    [OK] Segment extracted: 1.40s - 1.58s
    [OK] Segment extracted: 1.10s - 1.44s
    [OK] Segment extracted: 1.50s - 1.71s
    [OK] Segment extracted: 0.20s - 0.39s
    [OK] Segment extracted: 0.40s - 0.63s
    [OK] Segment extracted: 3.14s - 3.55s
    [OK] Segment extracted: 1.44s - 1.81s
    [OK] Segment extracted: 0.43s - 0.58s
    [OK] Segment extracted: 3.32s - 3.76s
    [OK] Segment extracted: 1.58s - 2.04s
    [OK] Segment extracted: 4.87s - 5.13s
    [OK] Segment extracted: 10.63s - 11.01s
    [OK] Segment extracted: 0.72s - 1.18s
    [OK] Segment extracted: 1.62s - 1.89s
    [OK] Segment extracted: 0.35s - 0.52s
    [OK] Segment extracted: 0.33s - 0.62s
    [OK] Segment extracted: 1.00s - 1.17s
    [OK] Segment extracted: 0.37s - 0.66s
    [OK] Segment extracted: 26.00s - 26.18s
    [OK] Segment extracted: 0.58s - 1.05s
    [OK] Segment extracted: 1.81s - 2.32s
  [OK] Concatenated 44 segments (frame-perfect)
  [OK] Audio extracted: ref_audio.aac
  [OK] Audio merged onto video (optimized)

============================================================
[OK] PIPELINE COMPLETE
============================================================
Output: data\results\mimic_output_ref4_vibes_test.mp4
Duration: 14.23s
Segments: 30
Processing time: 322.5s
============================================================


================================================================================
âœ… SUCCESS!

ğŸ“Š Basic Results:
   Output: mimic_output_ref4_vibes_test.mp4
   Duration: 14.19s (ref: 14.23s)
   Difference: 0.04s
   Processing time: 322.5s

================================================================================
ğŸ§  COMPREHENSIVE SYSTEM ANALYSIS
================================================================================

ğŸ“¹ Reference Analysis:
   Editing Style: Cinematic Montage
   Emotional Intent: Dynamic
   Arc Description: Video with multiple scene changes
   Total Segments: 30

ğŸ“ˆ Arc Stage Distribution:
   Peak: 19 segments (63.3%)
   Build-up: 6 segments (20.0%)
   Intro: 3 segments (10.0%)
   Outro: 2 segments (6.7%)

ğŸ¨ Vibe Distribution:
   Travel: 11 segments (36.7%)
   Nature: 9 segments (30.0%)
   Friends: 8 segments (26.7%)
   Action: 2 segments (6.7%)

ğŸ“ Clip Usage Analysis:
   Unique clips used: 19/20
   Most used clips:
     clip_007.mp4: 5 times (11.4%)
     clip_003.mp4: 3 times (6.8%)
     clip_018.mp4: 3 times (6.8%)
     clip_020.mp4: 3 times (6.8%)
     clip_006.mp4: 3 times (6.8%)

ğŸ§  AI Reasoning Breakdown:
   âœ¨ Smart Match: 22 (50.0%)
   ğŸ¯ Good Fit: 15 (34.1%)
   âš™ï¸ Constraint Relaxation: 7 (15.9%)

ğŸ¨ Vibe Matching:
   Matches: 24/44 (54.5%)

ğŸ“ Cut Statistics by Arc Stage:
   Intro: 3 cuts, avg 0.47s
   Build-up: 6 cuts, avg 0.45s
   Peak: 33 cuts, avg 0.28s
   Outro: 2 cuts, avg 0.52s

ğŸ“ Overall Cut Statistics:
   Total cuts: 44
   Average cut: 0.32s
   Shortest cut: 0.13s
   Longest cut: 0.56s

ğŸ’­ Sample AI Reasoning (first 5 decisions):
   1. clip_003.mp4: ğŸ¯ Good Fit: Vibe 'Nature'...
   2. clip_007.mp4: âœ¨ Smart Match: Vibe 'Travel' | Smooth motion flow...
   3. clip_017.mp4: âœ¨ Smart Match: Vibe 'Friends' | Smooth motion flow...
   4. clip_018.mp4: âœ¨ Smart Match: Build-up energy | Smooth motion flow...
   5. clip_020.mp4: âœ¨ Smart Match: Build-up energy | Smooth motion flow...

ğŸ“¦ Clip Metadata Quality:
   Clips with best_moments: 20/20
   Clips with vibes: 20/20
   Clips with content_description: 20/20

ğŸ” Temporal Precision Check:
   âœ… TIMELINE INTEGRITY: No gaps or overlaps detected (all within 0.001s tolerance)

ğŸ“¦ Material Efficiency:
   Total source duration available: 232.22s
   Total duration used in edit: 14.18s
   Unique clip segments used: 44
   Utilization Ratio: 6.1%
   ğŸ’¡ Note: Low utilization suggests clips may not match reference vibes well

ğŸ“Š Selection Reasoning Breakdown:
   Arc Stage Relevance: 6 decisions (13.6%)
   Vibe Matching: 24 decisions (54.5%)
   Visual Cooldown Warnings: 2 decisions (4.5%)
   Smooth Transitions: 43 decisions (97.7%)
   Usage Penalties Applied: 2 decisions (4.5%)

ğŸ’­ Detailed Reasoning Examples (first 3 decisions):

   Decision 1:
     Timeline: 0.000s - 0.530s (0.530s)
     Clip: clip_003.mp4
     Source: 2.50s - 3.03s
     Segment: Intro | Medium/Dynamic | Vibe: Nature
     Reasoning: ğŸ¯ Good Fit: Vibe 'Nature'
     Vibe Match: âœ…

   Decision 2:
     Timeline: 0.530s - 0.930s (0.400s)
     Clip: clip_007.mp4
     Source: 0.50s - 0.90s
     Segment: Intro | Medium/Dynamic | Vibe: Travel
     Reasoning: âœ¨ Smart Match: Vibe 'Travel' | Smooth motion flow
     Vibe Match: âœ…

   Decision 3:
     Timeline: 0.930s - 1.400s (0.470s)
     Clip: clip_017.mp4
     Source: 0.00s - 0.47s
     Segment: Intro | High/Dynamic | Vibe: Friends
     Reasoning: âœ¨ Smart Match: Vibe 'Friends' | Smooth motion flow
     Vibe Match: âœ…

================================================================================
ğŸ‰ Watch the result: data\results\mimic_output_ref4_vibes_test.mp4
================================================================================
================================================================================
